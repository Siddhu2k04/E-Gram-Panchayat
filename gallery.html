<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Gallery - E-Gram Panchayat Anurabad</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="css/style.css">
  <script src="js/translator.js"></script>
  <script src="js/main.js"></script>

 <!-- Firebase Compat SDK -->
  <script src="https://www.gstatic.com/firebasejs/10.5.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.5.2/firebase-firestore-compat.js"></script>
  
</head>
<body>

<div id="google_translate_element"></div>
<header>
  <h1>E-Gram Panchayat Anurabad</h1>
</header>

<header class="menu-header">
  <div class="logo">Gallery</div>
  <button class="menu-toggle" id="menu-btn">&#9776;</button>
  <nav class="dropdown-menu" id="menu">
    <a href="index.html">Home</a>
    <a href="about.html">About</a>
    <a href="notices.html">Notices</a>
    <a href="members.html">Members</a>
    <a href="gallery.html">Gallery</a>
    <a href="contact.html">Contact</a>
    <a href="complaint.html">Complaint</a>
    <a href="admin/admin.html">Admin</a>
  </nav>
</header>

<script>
  const btn = document.getElementById('menu-btn');
  const menu = document.getElementById('menu');
  btn.addEventListener('click', () => {
    menu.classList.toggle('show');
  });
</script>

 

<section class="section">
  <h3>Recent Works in Village</h3>
  <div class="gallery-grid"></div>
</section>




<!-- Popup HTML -->
<!-- üîç Modal for Popup -->
<div id="imageModal" class="modal" style="display: none;">
  <span class="close" onclick="closeModal()">&times;</span>
  <img class="modal-content" id="modalImage">
  <div id="modalCaption"></div>
</div>
<style>


</style>


<script>

  // üîç Modal Popup
  function openModal(imageUrl, title, description) {
    const modal = document.getElementById("imageModal");
    const modalImg = document.getElementById("modalImage");
    const modalCaption = document.getElementById("modalCaption");

    modal.style.display = "flex";
    modalImg.src = imageUrl;
    modalCaption.innerHTML = `<strong>${title}</strong><br>${description}`;
  }

  function closeModal() {
    document.getElementById("imageModal").style.display = "none";
  }
</script>





<script>
  const firebaseConfig = {
  apiKey: "AIzaSyA8p-2sP6Qav5eyq_ONaima4iskhDWz9mw",
  authDomain: "e-gram-panchayat-portal.firebaseapp.com",
  databaseURL: "https://e-gram-panchayat-portal-default-rtdb.firebaseio.com",
  projectId: "e-gram-panchayat-portal",
  storageBucket: "e-gram-panchayat-portal.firebasestorage.app",
  messagingSenderId: "625880846235",
  appId: "1:625880846235:web:0823cf957adf01ceb85b3e"
};

firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();


  // üîê Your imgbb API key (for image upload)
  const imgbbAPIKey = "87a3c2ad5f8e9d4c548f82a8d2b8478f";

 
  
  // üëá Load Recent Works from Firestore and display in gallery
  db.collection("recetwork")
    .orderBy("timestamp", "desc")
    .onSnapshot(snapshot => {
      const gallery = document.querySelector(".gallery-grid");
      gallery.innerHTML = ""; // Clear previous content

      snapshot.forEach(doc => {
        const work = doc.data();
        const title = work.title || "Untitled Work";
        const imageUrl = work.imageUrl || "img/placeholder.jpg";
         const description = work.description || "No description available";
          const time = work.timestamp?.toDate().toLocaleString() || "";

       gallery.innerHTML += `
  <div class="gallery-item" onclick="openModal('${imageUrl}', '${title}', \`${description}\`)">
    <img src="${imageUrl}" alt="${title}">
    <div class="caption">${title}</div>
  </div>
`;

      });
    });
</script>







<footer>
    &copy; 2025 E-Gram Panchayat Anurabad. All rights reserved.
  </footer>

</body>
</html>

